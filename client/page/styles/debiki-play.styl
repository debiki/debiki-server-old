/*!
 * Copyright (C) 2010-2013 Kaj Magnus Lindberg (born 1979)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

// Styles specific to Debiki's Play Framework application.



// Standard tags
//===========================


// ------ IE 6, 7 and 8 non-comopatibility

.debiki-show-if-lte-ie7,
.debiki-show-if-lte-ie8
  display: none

body.dw-ua-lte-ie7 .debiki-show-if-lte-ie7
  display: inline

body.dw-ua-lte-ie7 div.debiki-show-if-lte-ie7
  display: block

body.dw-ua-lte-ie8 .debiki-show-if-lte-ie8
  display: inline

body.dw-ua-lte-ie8 div.debiki-show-if-lte-ie8
  display: block

body.dw-ua-lte-ie7 .debiki-show-unless-lte-ie7,
body.dw-ua-lte-ie8 .debiki-show-unless-lte-ie8
  display: none


// ------ Standard elems

ins
  text-decoration: none
  background: #9f9

del
  text-decoration: line-through
  background: #ffd0d0

// Use larger font when editing page title.
.dw-pri .dw-p-ttl > .dw-f-e textarea
  font-size: 26px

.dw-ar-p
  padding-bottom: 0.8em



// Dashbar
//===========================


#debiki-dashbar
  background: black

#debiki-dashbar .debiki-dashbar-logo img
  width: 26px
  padding: 0
  margin: 0
  position: relative

#debiki-dashbar a
  display: inline-block
  color: hsl(0, 0%, 87%)
  font-family: Verdana, sans-serif
  text-decoration: none
  font-weight: bold
  height: 100%
  padding: 5px 7px 6px 7px
  vertical-align: middle

#debiki-dashbar a:hover
  background: #888
  color: #fff

// Hide reply button until a page body has been written.
.dw-t.dw-dummy > .dw-res,
.dw-t.dw-dummy > .dw-t-vspace
  display: none



// Page rendering
//===========================


// Hide ugly React action links until they've been converted to
// beautiful Reply, Rate etcetera links.
html.js.dw-render-actions-pending .dw-as,
html.js body.dw-render-actions-pending .dw-as
  visibility: hidden


// Page title
//---------------------------


#dw-t-65501    // the page title post has id 65501
  // Don't float title, or body will appear to the right of the title,
  // rather than below it.
  // There're no SVG arrows that can be cropped, see above, [8DbF3].
  float: none



// Posts
//---------------------------


// Hide the reply form resize handle unless hovering the form.
.dw-fs-re .ui-resizable-se
  visibility: hidden

.dw-fs-re:hover .ui-resizable-se
  visibility: visible

// Prevent the edit form from getting as wide as the page.
.dw-depth-0 > .dw-p > .dw-f-e .dw-e-tabs
  float: left
  clear: both

// For horizontal reply forms: An arrow to any replies to the right...
li.dw-fs-re:not(:last-child) .dw-arw-hz-line-to-sibling
  top: -39.5px

// ... But only show that arrow if horizontal layout ...
.dw-t:not(.dw-hor) > .dw-res > .dw-fs-re .dw-arw
  display: none

// ... and if there're replies to the right.
li.dw-fs-re:last-child .dw-arw-hz-line-to-sibling
  display: none



// Cropped and resized posts
//---------------------------


.dw-p.dw-x-s > .dw-p-bd,
.dw-p.dw-x-s > .dw-p-hd
  max-height: 4em
  // The max-height of a truncated .dw-p-bd is 4em, but if floating
  //elements are present inside the -p-bd (e.g. inline reply threads)
  //its height might grow to e.g. 2000 px. Then at least Chrome places the
  //truncation mark far away, so the parent .dw-p grows to e.g. 2000 px.
  //By hiding overflow, the truncation mark won't be pushed down by other
  //tags inside the .dw-p-bd, and the parent .dw-p won't be larger than
  //what it's supposed to be (i.e. roughly 4em + 4em).
  //overflow: hidden;  -- no, doesn't work well: in some unfathomable
  //weird way, the inline thread disappear upwards, but space is reserved for
  //them below, as if I had added `relative: -2000px' (which I have not).

.dw-p.dw-x-s
  // Since `overflow: hidden' on .dw-p-bd doesn't work well (see the
  // long comment above), restrict max-height of the .dw-p instead (again
  // see the long comment above, for info on why this is done).
  max-height: 8em

// Don't truncate the root post. (`:not()` isn't supported in <= IE8.)
.dw-depth-0 > .dw-p.dw-x-s,
.dw-depth-0 > .dw-p.dw-x-s > .dw-p-bd,
.dw-depth-0 > .dw-p.dw-x-s > .dw-p-hd
  max-height: none

.dw-p > .dw-x-mark
  display: block
  position: absolute
  bottom: 0px
  right: -3px
  padding: 4px 25px 0 10px // there's a resizable-se grip to the right
  height: 17px
  background: white
  font-style: italic
  letter-spacing: 0.3ex

.dw-p.dw-x-s:hover > .ui-resizable-se,
.dw-p.dw-x-s:hover > .dw-x-mark
  background-color: #fdc
  color: #363636

// Indicate which borders the user has resized.
.dw-p-rez-e
  border-right: 1px solid #888
  padding-right: 3px // or text to close to the border
  // This post might extend over [a thread to the right], since
  // it has been resized eastwards. So as not to draw this post and
  // [the post to the right] over each other, let this post hide
  // [the post to the right] by specifying a higher z-index.
  z-index: 11

.dw-p-rez-e:hover
  z-index: 12 // or resized thread might be merged with each other

.dw-p-rez-s
  border-bottom: 1px solid #888
  // padding-bottom: 3px; -- pointless: because of overflow, text might
  //                      end up immediately next to the border anyway



// Hide interactions
//---------------------------


.dw-a-show-interactions
  color: #3872AB !important
  visibility: visible !important
  font-size: 10px

// Sync these selectors with showCommentsOnClick in debiki.js.
.dw-hide-interactions .dw-ar-t > .dw-res,
.dw-hide-interactions .dw-ar-t > .dw-p > .dw-p-bd > .dw-p-bd-blk .dw-i-m-start,
.dw-hide-interactions .dw-ar-t > .dw-p > .dw-p-bd > .dw-i-ts,
.dw-hide-interactions .dw-debate svg
  display: none



// Comments
//---------------------------

// Make the column separator at least this high. But don't do this for
// .dw-fs because forms are folded/slided out, i.e. shrinked to zero height.
.dw-p-as-hz,
.dw-depth-1:not(.dw-i-t)
  min-height: 100px

// Add some whitespace above replies, when laid out horizontally,
// so there's some space for the SVG arrows.
.DW.DW .dw-hor:not(.dw-depth-0) > .dw-res
  margin-top: 35px

.dw-hor:not(.dw-depth-0) > .dw-p-as-hz
  margin-top: 48px // aligns with the .dw-p:s to the right, which
                   // have some padding

// But show the whole article (or <pre>s with very long lines
// might be cropped).
.dw-ar-p
  overflow: visible

// Deleted posts appear as just a single text line,
// looks better if they appear close to the fold link.
.dw-p-dl
  margin-left: 23px

// If the thread has been deleted, there's no fold/unfold button to the left.
.dw-t-dl > .dw-p
  margin-left: 0

// Don't pad the root post and titles (titles are already indented since
// they're placed inside another post already).
.dw-ar-p-hd,
.dw-depth-0 > .dw-p > .dw-p-bd,
.dw-p-ttl,
.dw-p-ttl > .dw-p-bd
  margin-left: 0
  padding-left: 0

.dw-p-dl > .dw-p-hd
  margin-bottom: 24px // for now — there're currently no spacy hidden
                      //  action links below deleted posts
  font-style: italic
  background-color: transparent

// Users with links to more info, e.g. website or blog
.dw-pri a.dw-p-by,
.dw-pri a.dw-p-e-by
  color: #369 // same as reddit
  font-weight: bold

// Users with no links to more info
span.dw-p-by,
span.dw-p-e-by
  color: #555
  font-weight: bold

// Make authorship info easy to read
:not(.dw-p-hd-e) > .dw-p-by
  font-size: 11px
  margin-right: 0.9ex

.dw-lg-t-spl
  font-size: 90%
  padding-left: 2px
  padding-right: 2px

// Permalinks
.dw-p-link
  float: right
  font-family: monospace
  padding: 2px 3px 2px 4px

// For the *article* itself, make author and post date info less conspicuous,
// or it steals attention from the page title. (But don't do this for any root
// post, only for the article.)
.dw-ar-p-hd
  border: none
  background-color: transparent
  opacity: 0.6
  font-size: 10px
  margin-top: 12px

.dw-ar-p-hd:hover
  opacity: 1

.dw-ar-p-hd > .dw-p-by
  color: #396D99

// Un-indent any root post, by hiding the collapse button.
// (Why would one want to hide the root post?)
.dw-depth-0 > .dw-z
  display: none

.dw-depth-0 > .dw-p
  margin-left: 0
  //float: left; // or the header will be as wide as the root thread
  //                fix the header instead? I need to fix it anayway

:not(.dw-hor) > .dw-p > .dw-p-bd > .dw-p-bd-blk
  // Cancel .dw-p-bd 3px padding-left:, because the .dw-p-bd-blk is
  // 100% wide though, and without padding-right, text might be cropped.
  padding-right: 3px
  // Adjus max comment width: don't span whole screen even if
  // .post.cropped-e is removed.
  max-width: 40em

// Cancel .dw-p-bd-blk max width for code pages, and for the page config post.
[data-page_role='Code'] .dw-hor > .dw-p > .dw-p-bd > .dw-p-bd-blk,
[data-page_role='Code'] .dw-hor > .dw-p > .dw-f-e > .dw-e-tabs > .dw-e-tab > .dw-p-bd-blk,
#post-65503 > .dw-p-bd > .dw-p-bd-blk,
#post-65503 > .dw-f-e > .dw-e-tabs > .dw-e-tab > .dw-p-bd-blk
  max-width: none

// Cancel Twitter Bootsrap wrapping of <pre>
.dw-hor > .dw-p > .dw-p-bd > .dw-p-bd-blk > pre
  white-space: pre
  word-wrap: normal

.dw-p-diff
  line-height: normal // or becomes 120% so -diff lines lines overlap

// Don't place the body too close to the title. But cannot add margin to the
// title — that'd push away the .dw-p-hd away. So add to the -bd instead.
// <h2> should have a fairly large margin-top (because it's a h2), so skip it.
// — The reason all this is needed is that the elems
// float:left, which makes margins add to each other, instead of overlapping
// each other. I should rewrite, and try to avoid float:left? [8DbF3]
// (skip old IE)
// [8K3U5]
.dw-ar-t > .dw-p > .dw-p-bd > .dw-p-bd-blk > :first-child:not(h2)
  margin-top: 26px

// Make inline threads compact.
.dw-i-t > .dw-p > .dw-p-bd,
.dw-i-t > .dw-p > .dw-p-diff
  padding-top: 1px

.dw-i-t > .dw-p > * /*.dw-p-bd or -diff*/ > .dw-p-bd-blk
  padding: 0
  margin: 0

.dw-i-t > .dw-p > * /*.dw-p-bd or -diff*/ > .dw-p-bd-blk ~ .dw-p-bd-blk
  margin-top: 0.6em

.dw-p:hover
  // If the post is beeing up-sized, its up-sized parts might be hidden
  // by another thread, because its z-index has not yet been set to 11
  // by the adding of class dw-p-rez-e. Therefore:
  z-index: 10

.dw-as
  margin: -6px 0 6px 28px
  // Use padding-top not margin-top here, or there'll be a tiny space between
  // the post and the .dw-as, which triggers a certain $thread.mouseleave() in
  // debiki.js which, for inline actions, hides the action menu — just before
  // you're able to click any action.
  padding: 5px 0 8px
  position: relative // for position: absolute 'Click this...' tips, inside

.dw-p-as-hz
  position: relative // curve image placed relative
  padding-right: 20px
  margin: 10px 16px 0 12px

// The reply button text can be customized, so it might be rather wide,
// so set max-width and line height.
.dw-p-as-hz > .dw-a-reply
  max-width: 8em
  display: inline-block // or max-width has no effect
  line-height: 120%

.dw-a
  text-decoration: none
  color: #3872ab
  font-size: 13px

.dw-a-disabled
  color: #d2d2d2 !important
  cursor: default

.dw-a-disabled:hover
  text-decoration: none !important

.DW .dw-t > .dw-as .dw-a
  display: inline-block
  margin-right: 12px

// Show a ▾ icon after "More" text, same as class .icon-down-dir, but :after.
// Don't use "▾" directly though; it breaks on my mobile.
.dw-a-more:after
  content: " \e80f"
  font-family: "fontello"

.DW.DW .dw-p-as-more > .dw-a
  display: block
  margin: 8px 10px 14px 12px

#dw-p-as-shown a
  color: hsl(210, 51%, 45%)

.dw-a-color-primary
  color: hsl(210, 51%, 45%) !important // the color for most common actions
  //                                     (should be a Stylus/LESS variable)


// Make the reply and rate links easy to notice.
.dw-t > .dw-as > .dw-a-reply,
.dw-t > .dw-as > .dw-a-rate
  font-weight: bold

.DW .dw-t > .dw-as > .dw-a-edit,
.DW .dw-t > .dw-as > .dw-a-collapse-suggs,
.DW .dw-t > .dw-as > .dw-a-flag-suggs,
.DW .dw-t > .dw-as > .dw-a-delete-suggs
  float: right
  margin: 0 0 0 12px
  color: #888

.DW .dw-t > .dw-as > .dw-a.dw-a-pending-review
  // Show these pending-suggestion links, even when not hovering posts,
  // so people are encouraged to consider each other's suggestions.
  visibility: visible

.dw-a:hover
  color: #c77405 // jQuery UI's ui-state-hover color
  text-decoration: underline

.dw-p-as-hz > .dw-a.dw-a-reply
  font-size: 17px
  margin: 0

.dw-p-as-hz > .dw-a
  display: block

.dw-p-as-hz > .dw-a:not(.dw-a-reply)
  margin-top: 1.3em
  color: #777

.dw-p-as-hz > .dw-a:not(.dw-a-reply):hover
  color: hsl(211, 30%, 40%)

// For now...
.dw-p-as-hz > .dropdown,  // hide the More actions dropdown; it confuses testers
.dw-p-as-hz > .dw-a-rate  // and one shouldn't be able to rate the article.
  display: none

.dw-p-as
  // Prevent collapsed posts from appearing too close to any post just below,
  // by making the actions <div> at least this tall. (It's empty, currently
  // if the post is collapsed or deleted.)
  min-height: 17px
  // Draw actions above arrows, and above replies, so the More actions
  // dropdown menu is drawn above "Click to show this thread" texts.
  z-index: 4
  background: white

body.dw-u-ui-simple .dw-a-edit
  display: none !important



// Post info
//---------------------------


.dw-p-pending-mod
  margin-bottom: 5px
  font-style: italic
  font-weight: bold

.dw-p-hd .dw-p-at
  // javascript shows e.g. '7 days ago' instead of the .dw-p-at ISO dates.
  // Hiding the dates with jQuery.hide() at page loat time takes long,
  // so better hide here. COULD use another stylesheet if javascript disabled.
  display: none

//.dw-p-flgs-top,
//.dw-p-rs-top

.dw-p-hd .dw-p-by-me,
.dw-p-hd .dw-p-r-by-me
  font-weight: bold
  color: #151515

.dw-p-hd .dw-p-r-by-me > em
  font-weight: normal
  color: #111

.dw-p-flgs-all,
.dw-p-r-all
  display: none // shown on .dw-p-hd click

.dw-flgs,
.dw-flgs li,
.dw-rs,
.dw-rs li
  display: inline

.dw-flgs li,
.dw-rs li
  margin-left: 0.5ex

//.dw-p-hd .dw-rs .dw-r-tag
//font-size: 85%

.dw-p-hd .dw-r-count,
.dw-p-hd .dw-r-tag-frac-min,
.dw-p-hd .dw-r-tag-sum,
.dw-p-hd .dw-r-valsum-max
  margin-left: 3px
  font-weight: bold
  display: none // it's for debugging mostly; makes non-developers confused

.dw-p-hd .dw-rs .dw-r-tag-frac
  font-size: 90%
  position: relative
  left: -2px


.dw-p-hd
  .dw-p-pin
    float: right
    font-size: 15px
    cursor: move
    opacity: 0.76



// Posts that are part of the article
//---------------------------

// - Author info not shown — because it's already shown, at the top
//    of the article (page).
// - The [-] (fold) button is removed, and the post is unindented
//    (left-margin: 0), because you should not be able to hide/fold the
//    article itself.

.dw-t.dw-p-art-qst > .dw-z,
.dw-t.dw-p-art-qst > .dw-p > .dw-p-hd
  display: none !important

.dw-t.dw-p-art-qst > .dw-p
  margin-left: 5px // moves it upwards, so it appears slightly above the SVG arrow
  //          that presumably points to it, at its left side
  top: -9px
  position: relative



// Inline replies
//===========================


// Inline mark icons
//---------------------------

.dw-i-m-start.ui-icon
  display: inline-block // otherwise display:block, and a new paragraph
  position: relative
  margin-left: 5px // move away from the word to the left,
  //                   hmm, this assumes a left-to-right language. LTR RTL

// Remove white space around the inline marks.
.dw-i-m-start.ui-icon-arrow-1-e
  width: 6px
  top: 3px
  left: -3px
  background-position: -37px -37px

.dw-i-m-start.ui-icon-arrow-1-s
  width: 8px
  height: 13px // don't push next line away; smallest font-size 13px?
  top: -1px
  background-position: -70px -36px

//.dw-i-m-start.ui-icon-arrow-1-s



// Inline threads
//---------------------------

// Avoid a flash of incorrectly placed inline threads: don't show them
// until they've been moved into the .dw-bd-blk > .dw-i-ts.
.dw-res > .dw-i-t
  display: none

.dw-hor > .dw-p > .dw-p-bd > .dw-i-ts
  float: left
  margin-left: 120px // arrows from inline-marks to -threads drawn here

// Stack inline posts vertically.
.dw-p-bd .dw-i-t
  float: left
  clear: left

// For vertical layout, place inline threads below the .dw-p-bd-blk, indented.
// (With horizontal layout, they're placed to the right of the post.)
.dw-t:not(.dw-hor) > .dw-p > .dw-p-bd > .dw-i-ts
  float: left
  clear: left

.dw-t:not(.dw-hor) > .dw-p > .dw-p-bd > .dw-i-ts > .dw-i-t
  margin-left: 70px // indents, and leaves space for SVG/fake arrows

// Make inline comments less conspicuous.
.dw-i-t
  color: #444
  font-size: 95%

.dw-i-t > .dw-a
  margin-bottom: 0px // don't push next inline thread away

.dw-p-bd-blk
  margin: 0
  float: left
  clear: left

// Adjust inline-replies to the root post.
.dw-hor > .dw-p > .dw-p-bd > .dw-p-bd-blk + .dw-i-t
  margin-left: 4em // move away from the root post text


// Highlighting
//---------------------------

.dw-i-m-start.dw-highlight
  outline: solid medium #f0a005
  background-color: yellow


// Hidden templates
//---------------------------

#dw-hidden-templates
  display: none


// Inline action menu
//---------------------------

.dw-pri.dw-pri .dw-as-inline // prio, so overrides :not(svg) [31Ik53]
  position: absolute
  z-index: 20

.dw-as-inline li
  margin: 0 // or margin from `dw-p-bd li' applied
  float: left
  list-style-type: none

.dw-as-inline .ui-button
  margin-right: 0 // or space between inline action menu buttons


// Edit suggestions  -— old not in use?
//---------------------------

.dw-e-sgs
  font-size: 85%

.dw-e-sg
  border-bottom: dotted 1px #ccc
  padding: 7px 0 2px 0
  margin: 0 0 0 0

  &:last-child
    border-bottom: none

  &:hover
    background-color: #e5e5e5

.dw-e-sg-vs
  float: left
  width: 30px

.dw-e-sg-e
  position: relative
  margin-left: 30px

.dw-e-sg .dw-e-text,
.dw-e-sg .dw-e-rslt
  display: none // text used by javascript diff algorithm

//.dw-e-sg .dw-e-desc

.dw-e-sg .dw-e-by
  color: #3872ab // same as action links

//.dw-e-sg .dw-e-at



// Full screen dialogs
//===========================

// See d.i.newModalDialogSettings() in debiki-jquery-dialogs.js.

.DW .dw-dlg-fullscreen
  position: static !important
  top: 0 !important
  left: 0 !important
  width: 100% !important
  height: 100% !important
  overflow: auto !important

  .dw-fs.ui-dialog-content
    // jQuery UI might prefer to set a height and show scrollbars, so:
    height: auto !important

.DW body.dw-fullscreen-dialog-mode > *
  display: none



// Forms
//===========================


.dw-fs
  margin: 10px 0 20px 5px // 5px, like .dw-t
  position: relative // e.g. 'Submitting ...' with position: absolute inside

.dw-f
  position: relative // shouldn't use both .dw-fs and .dw-f though!

// Reduce distance between a form and any parent jQuery UI dialog buttons.
.ui-dialog > .dw-fs
  margin-bottom: 11px // 20px (from just above) too much

.dw-hor > .dw-res > .dw-fs
  margin: 0
  padding-right: 19px
  padding-left: 0 // nothing to the left

.dw-fs form
  z-index: 1100 // place above column resize handle...
  //              ... hmm but it has z-index: 1 only [0QKxg2]
  position: relative
  padding: 1em
  margin-left: 10px // move away from any vertical arrow
  // My Firifox 3.6 draws outlines very incorrectly for the Rating form,
  // (but correctly for Reply and Edit), use borders instead.
  // outline: #83c5df solid thick;

.ui-dialog .dw-fs form
  margin: 0 25px 0 8px
  padding-top: 0.4em // smaller than 1em from above `.dw-fs form`

// Remove any border above jQuery UI dialog buttons.
.dw-pri .ui-dialog-buttonpane
  border-top: none

// Float drop fix. Was needed by #dw-fs-openid-login or #dw-fs-lgi-simple.
// Now *sometimeis* needed by #dw-fs-flg, or some radio button float
// drops and scrollbars appear. Sometimes? Yes, in Chrome `14.0.835.186'
// on my KDE computer — but not in Chrome `14.0.835.186 beta' on my
// Gnome computer. Perhaps better keep this fix, since hard to know if
// it works everywhere, even if it works fine for you.
.dw-fs.ui-dialog-content
  // margin: 20px 0 0; // cancel .dw-fs too wide margin
  // padding: 0 !important; // cancel jQuery UI's inline style
  width: 100% !important

.dw-fs.ui-dialog-content > form
  border: none // the buttonpane is outside, same color as form
  // Cancel z-index:1100 rule, otherwise the <form> would be placed
  // lower than the jQuery UI dialog itself, and jQuery would stop clicks.
  z-index: auto // cancel rule

.dw-fs small
  font-size: 70%

.dw-fs form label
  margin-top: 1ex
  display: inline-block // or margin has no effect

.dw-f textarea,
.dw-fs textarea // COULD use only dw-f not -fs
  display: block // This also ditches any descender space...
  // ...The descender space below the textarea would otherwise cause
  // overflow — a terrible vertical scrollbar would appear, in those
  // cases where I've attempted to fit it exactly inside its parent.

.dw-fs input[type='checkbox']
  display: inline

.DW .dw-page form input[type='text'],
.DW .dw-page form textarea
  font-family: Verdana, sans-serif // the font .dw-post .dw-text uses
  margin-top: 0.7em

.dw-pri form textarea
  width: 100%
  resize: none // disable Chrome's default-resizable (and
  //              make the accordion resizable instead)
  padding-right: 0px  // else 97% (above) often too large, so...
  padding-bottom: 0px // ...scrollbars appear
  border-color: #aaa // default black is too sharp

// IE 7 bugfix, root thread reply textarea otherwise 2000 or 20000px wide.
.dw-hor > .dw-res > .dw-fs-re textarea
  max-width: 440px

// CodeMirror problem fix — don't change the height of CodeMirror's
// internal <textarea>, or CodeMirror won't work (it'll ignore most
// key presses)
.CodeMirror textarea
  height: auto !important

// The default seems to be 10px wich is almost unreadable.
.CodeMirror
  font-size: 13px

// Make CodeMirror auto-resize its height.
// (Works also without .dw-prio -- although CodeMirror specifies 300px
// *later*. Weird.)
.DW .CodeMirror
  height: auto
  // overflow-y: hidden;
  // overflow-x: auto;
  // width: 100%;

// Show tabs.
.cm-tab:after
  content: "\21e5"
  display: inline-block
  width: 0px
  position: relative
  overflow: visible
  left: -1.4em
  color: #aaa

.dw-name-or-alias
  float: left // COULD avoid floating everything?
  clear: both
  margin-top: 1.8em

.dw-submit-set
  float: right
  clear: both
  margin-top: 1.3em

.dw-pri .dw-inf-submitting-form
  position: absolute
  padding: 1em 2em



// Login dialog
//---------------------------

// Assume user logged out
#dw-u-info,
#dw-a-logout
  display: none

.dw-lgi
  float: left
  clear: both
  margin: 10px 0

/*
//#dw-fs-lgi-simple
  // Use whole parent jQuery UI dialog, else scrollbars tend to appear.
  // jQuery UI seems to change the width to `auto'.
  //width: 100% !important;
  //overflow: visible; // or north-south scrollbar appears in Chrome
*/

.dw-lgi-openid
  padding: 0 30px 0 0
  margin-right: 45px
  height: 105px
  width: 125px
  position: absolute
  left: 0 // or IE 7 places it far to the right

.dw-lgi-openid-info
  margin: 1em 0

.dw-lgi-openid-why
  margin-top: 1em

.dw-a-login,
.dw-a-logout
  white-space: nowrap

.dw-a-login
  font-size: 200%
  margin-left: 10px
  color: #3872AB

.dw-a-login-openid
  display: block

.dw-lgi-or-wrap
  position: absolute
  height: 100%
  left: 190px // 50px + 140px, see .dw-lgi-openid
  background-color: #FBF7F2
  border-right: 1px solid #ccc

.dw-lgi-or-word
  top: 96px
  right: -9px
  position: absolute
  background-color: #FBF7F2
  padding: 4px 0 4px
  font-weight: bold

.dw-lgi-simple
  margin-left: 170px

.dw-lgi-simple-info
  padding: 1em 0 0.7em

.dw-lgi-simple label
  margin-top: 0.7em

.dw-lgi-simple input
  margin-top: 3px !important // COULD remove my own conflicting rule
  width: 200px

#dw-fi-lgi-url-lbl
  margin-top: 1.3ex



// Email notification preferences
//===========================


#dw-f-eml-prf .dw-submit-set
  float: none

#dw-f-eml-prf .ui-button
  float: right

#dw-fi-eml-prf-adr
  width: 18em

#dw-fi-eml-prf-submit-email
  margin-top: 1.3em



// Reply
//===========================


.dw-res > .dw-fs-re
  position: relative // vertical png arrow positioned relative this

.dw-fs-re > form
  min-width: 210px
  padding-top: 0
  margin-top: 0

.dw-hor > .dw-res > .dw-fs-re > form
  // There's nothing to the left.
  margin-left: 0
  padding-left: 0

.dw-fs-re label
  display: inline-block
  margin-right: 0.4em
  margin-top: 0 !important
  float: none // cancel Twitter Bootstrap's float: left
  width: auto // cancel Twitter Bootstrap's width: NNNpx

.dw-fs-re textarea
  // need to disable Chrome's default-resizing-of-textarea,
  // because the parent <form> (which is also resizable)
  // isn't resized when the textarea is resized.
  resize: none

.dw-fs-re textarea:focus
  border: 1px solid #91cdff // the .dw-keyrecvr color
  outline: 1px solid #91cdff

.dw-user-contrib-license
  float: left // COULD? stop floating everything in the <form>s
  clear: both
  color: #666
  font-size: 75%
  margin: 9px 0 0
  max-width: 34em // or license text makes reply-thread very wide

.dw-pri .dw-user-contrib-license a
  color: #99a

.dw-fs-re .dw-inf-submitting-form
  top: auto
  bottom: 95px
  left: 40px



// Rate
//===========================


.dw-fs-r
  margin: 0 0 30px 20px

.dw-f-r
  min-width: 250px // at least 2 rat-tag-set:s wide

.dw-fs-r .dw-r-tag-set
  float: left
  max-width: 8em

.dw-fs-r .dw-r-tag-set .ui-button
  min-width: 7em

.dw-fs-r .dw-show-more-r-tags
  margin-top: 1em
  float: left // otherwise margin-top has no effect, why not?
  clear: both
  font-size: 85%

// Stack more-rating-tags horizontally.
.dw-fs-r .dw-more-r-tags
  display: none // shown on .dw-show-more-r-tags click
  clear: both
  margin-top: 1em
  max-width: none

.dw-fs-r .dw-more-r-tags label
  float: left
  min-width: 0 !important

.dw-f-r .dw-inf
  padding: 1ex
  background-color: white

.dw-f-r-inf-changing
  display: none

.dw-f-r .dw-inf-submitting-form
  top: auto
  bottom: 23px
  left: 40px



// Flags
//===========================


.dw-f-flg-rsns
  margin: 0.5ex 0 1em




// Pin comment
//===========================


#dw-f-pin-pos
  input[name="position"]
    width: 3em
    text-align: right



// Edits dialog
//===========================


// Dialog background made white by javascript.

//.ui-tabs-nav > li
//  background-color: transparent;
//

#dw-e-sgs
  overflow: hidden // child height is 100%, so border exdends downw

#dw-e-sgs > .row
  margin-left: 0 // cancel Bootstrap's -15px

#dw-e-sgss
  padding-left: 0
  border-left: none

//#dw-e-sgs-diff

#dw-e-sgs-save-diff
  display: none // for now

#dw-e-sgs-prvw
  padding-right: 0

#dw-e-sgs-org-src
  display: none

#dw-e-sgs .dw-e-sgs
  margin: 1ex 0 25px 0

#dw-e-sgs .dw-e-sg-e
  margin-left: 9px

#dw-e-sgs .dw-e-sgs .dw-as
  margin: 7px 0px 3px 0px

#dw-e-sgs .dw-e-sg .dw-as .ui-button-text
  padding: .15em 1ex // or a relatively huge button

#dw-e-sgs-diff-text,
#dw-e-sgs-prvw-html
  background: hsl(0, 0%, 94%)

#dw-e-sgs .dw-submit-set
  float: none
  text-align: center


// Edit form
//===========================

// (Some properties defined elsewhere, search for dw-e-tab.)


.dw-pri .dw-f-e .dw-e-tabs,
.dw-pri .dw-f-e .ui-widget-header, // not needed, done in jQuery UI integr.
.dw-pri .dw-f-e.ui-widget-content
  background: transparent
  border: none

.dw-f-e-help-show
  color: hsl(211, 85%, 35%)
  float: left

.dw-f-e-help-text
  display: none
  box-shadow: 3px 3px hsl(0, 0%, 50%)
  background-color: #fcfcfc
  border: 1px solid hsl(0, 0%, 50%)
  padding: 3px 15px
  margin: 5px 0 10px 3px
  float: left // or wills whole screen
  clear: both

// Hide help text for comments; show only for page body.
:not(.dw-hor) > .dw-p > .dw-f-e .dw-f-e-help-show
  display: none

.dw-ui-simple .dw-f-e-mup
  display: none

.dw-pri .dw-f-e .dw-e-tab
  border: 1px solid #bbb
  overflow: auto
  padding: 0

// ... the textarea is outlined on :focus — add paddding so outline visible.
.dw-pri .dw-f-e .dw-e-tab-edit
  padding: 1px

// ... change padding for root post preview // and fix a bug
.dw-depth-0 > .dw-p > .dw-f-e .dw-e-tab-prvw
  padding: 1em

// ... for other previews, place some padding on the -bd-blk (!)
// not the -e-tab-prvw, because otherwise the panel becomes too wide
// and its right part is cut of by the parent thread (which has
// visibility:hidden) — some jQuery UI weird internal stuff?
.dw-e-tab-prvw > .dw-p-bd-blk
  padding: 1ex  // don't place directly on the .dw-e-tab-prvw

// The root post has no width restriction on .dw-e-tabs,
// since it's not placed inside a thread (which has a certain width).
.dw-depth-0 > .dw-p > .dw-f-e .dw-e-tabs > .dw-e-tab-edit,
.dw-depth-0 > .dw-p > .dw-f-e .dw-e-tabs > .dw-e-tab-diff
  width: 800px

.dw-pri .dw-f-e .dw-e-tab-edit textarea
  height: 100%
  margin: 0
  padding: 0
  border: none // would cause overflow, scrollbars would appear in tab panel
  outline-offset: 0px // Chrome defualts to -2px

// Indicate focus.
.dw-pri .dw-f-e .dw-e-tab-edit textarea:focus
  outline: 1px solid #91cdff // the .dw-keyrecvr color

// Indicate keyboard shortcut target.
.dw-pri.dw-pri .dw-keyrecvr .dw-e-tab
  border: 1px solid #91cdff

.dw-f-e-inf-save,
.dw-f-e .dw-f-e-sugg-info // COULD rename to .dw-f-e-inf-sg?
  margin-top: 1em
  padding: 6px
  max-width: 32em
  float: left // or margin-top has no effect
  clear: both
  background-color: #FFEFC6

.dw-f-e-inf-save,
.dw-f-e .dw-f-e-sugg-info > strong
  color: green
  font-weight: bold

.dw-f-e-inf-save
  display: none
  float: none // or it floats to the left of the edit tabs

// Place the stubmit buttons close to the edit form, away from
// replies/arrows below, so it's easy to see what they are
// related to.
.dw-f-e .dw-submit-set
  margin-top: 0.5em
  margin-bottom: 1em
  float: left

.dw-f-e .dw-inf-submitting-form
  top: auto
  bottom: 80px
  left: 60px



// Edit history / suggestions -— old not in use?
//===========================


.dw-fs-e // currently almost identical to <form>
  position: relative
  z-index: 1100

.dw-fs-e form
  margin: 1em 0
  float: none // or won't be wide enough to fill up parent
  clear: both // or show-form buttons appear to the left

.dw-depth-0 .dw-fs-e
  clear: both // or placed to the right of the action links

.dw-fs-e > a
  margin: 0.8em 0
  float: left // or 100% wide when sliding up/down, weird
  clear: both // or stacked horiz. when forms sliding up/down

.dw-fs-e form:first-of-type,
.dw-fs-e > a:first-of-type
  margin-top: 0

.dw-fs-e .ui-accordion
  margin-top: 0.75em

.dw-fs-e .ui-accordion-content
  padding: 0.7em 0.2em 0 0.6em !important // otherwise too much padding
  background: #f2f2f2 // jQuery UI's default bg is somewhat obtrusive
  border: 1px solid #BBB

.dw-fs-e .ui-accordion-content p
  // Use same font/size as .dw-debate
  font-family: Verdana, sans-serif
  font-size: 93%
  line-height: 110%

.dw-fs-e .ui-accordion h4
  font-weight: normal !important
  font-size: 93%

.dw-fs-e h4.dw-your-edit
  font-weight: bold !important

.dw-f-e-btns-vote,
.dw-edit-liking-stats
  margin: 1em 0 0

.dw-edit-dates
  margin: 0 0 1.1em

.dw-edit-dates,
.dw-edit-liking-stats
  font-style: italic
  font-size: 85%


// Delete comment form
//---------------------------

#dw-fi-dl-tree
  margin: 1em 0 0


// Create page form
//---------------------------

.dw-f-cr
  margin: 60px 0 30px

.dw-f-cr .dw-fi-submit
  margin-top: 30px

.dw-f-cr ul > li
  list-style-type: disc // the page creation info list



// Marks
//===========================


// Outline all posts in a new thread.
//.dw-m-t-new > .dw-p > .dw-p-hd
// border: 1px solid black  // no, ugly

.dw-m-p-edited
  border: 3px solid #f1cdbc



// Notifications
//===========================


.dw-dlg-rsp
  height: auto !important // or jQuery UI [1.8.16] sets 38px and scrollbars appear

form .dw-ntf
  float: left // or floating stuff might end up floating inside the .dw-ntf
  clear: both
  margin-bottom: 10px // or might overlap with resize form southeast handle

.dw-ntf
  font-family: monospace
  margin-top: 1em

.dw-ntf .ui-state-error
  padding: 0.1em 0.1em 0.2em 0.4em

.dw-ntf .ui-dialog-titlebar-close
  float: right
  height: 20px // easier to click, if 20px instead of default 16px
  width: 20px

.dw-ntf .dw-ntf-bd
  margin-left: 20px // no text below the notification icon

//.dw-ntf-sts

.dw-ntf-msg
  font-weight: bold

.dw-ntf-at
  font-size: 65%
  margin-top: 1ex

.dw-ntf-shw
  font-style: italic
  text-decoration: underline



// Tips
//===========================


// A tips on how replies are sorted, in the horizontal layout
#dw-tps-sort-order
  position: absolute
  top: -210px
  left: -250px
  white-space: nowrap

.dw-tps-sort-order-arw
  position: relative
  height: 15px
  top: 8px
  width: 55px
  display: inline-block
  margin: 0 10px 0 0
  background: url(img/arrows-etcetera-gray.png) no-repeat 0 -327px

.dw-tps-sort-order-arw.dw-flip-hz
  margin: 0 0 0 10px

.dw-tps-sort-order-your-post
  white-space: normal
  display: inline-block
  max-width: 133px
  text-align: center
  vertical-align: middle



// Inbox
//===========================

// COULD get rid of #sidebar selector somehow — make selectors in
// debiki-lift.css less inclusive?


#sidebar .dw-ibx
  margin-top: 2.2em
  color: #777
  font-size: 13px

#sidebar .dw-ibx li
  color: #777
  margin-left: 0
  font-size: 12px

#sidebar a.dw-ibx-pg-ttl
  color: #444 !important
  --font-weight: bold

#sidebar a.dw-ibx-p-bd
  font-size: 90%
  color: #666



// Dragsorting
//===========================

// A <div> with this class is appended to an element that's being dragsorted,
// so it's totally obvious what is being dragsorted.
.dw-dragsort-shadow
  position: absolute
  width: 100%
  height: 100%
  z-index: 10
  background: hsl(0, 0%, 50%)
  top: 0
  opacity: 0.3

  // When dragsorting pinned posts:
  &.dw-dragsort-pin-vt
    // There's some whitespace below where the actions are shown. Looks better if
    // the shadow doesn't cover all that whitespace, but instead extends a bit above
    // the tree.
    top: -20px



// Swipe gestures
//===========================

.dw-gesture-btn
  position: fixed
  padding: 25px 50px;
  border-radius: 15px
  // Above forms (1100)
  z-index: 1150



// Miscellaneous
//===========================


.dw-user-page-data
  display: none


// Clearfix
//---------------------------

.dw-fs,       // Contents might float
.dw-fs form,  // Contents might float
.dw-f.dw-f-e  // I suppose some edit form child floats left?
  // Copied from Bootstrap 3.0.0's less/mixin.less.
  &:before, &:after
    content: " "
    display: table

  &:after
    clear: both;



// jQuery UI integration
//===========================

// Here's a color blender: http://websitetips.com/colortools/colorblender/


// Same color as the ui-buttons
.dw-ui-state-default-color
  color: #1c80c4   //1c94c4

.dw-ui-state-default-color-bright
  color: #83c5df

.dw-ui-state-default-color-brighter
  color: #c1e2ef

.dw-ui-state-default-color-brightest
  color: #eaf5fa

// Same font
.dw-ui-widget-font
  font-family: 'Trebuchet MS', Tahoma, Verdana, Arial, sans-serif

// Remove tab navigation background color and border.
.dw-pri .ui-tabs .ui-tabs-nav
  background: transparent
  border: none

.dw-pri .ui-tabs .ui-tabs-panel
  border: 1px solid #BBB

// Tabs placed below their content, see: jqueryui.com/demos/tabs/#bottom
.dw-ui-tabs-bottom
  position: relative

.dw-ui-tabs-bottom > .ui-tabs-panel
  height: 140px
  overflow: auto

.dw-pri .dw-ui-tabs-bottom > .ui-tabs-nav
  position: absolute !important
  left: 0
  bottom: 0
  right: 0
  padding: 2px 2px 0

.dw-ui-tabs-bottom > .ui-tabs-nav li
  margin-top: -2px !important
  margin-bottom: 3px !important  // [debiki] changed from 1px to 3px
  border-bottom-width: 1px
  border-top: 2px transparent

.dw-ui-tabs-bottom > .ui-tabs-nav > .ui-tabs-selected
  margin-top: -2px !important

// ... My additional fixes
.dw-ui-tabs-bottom > .ui-tabs-panel
  margin-bottom: 29px // push the tab naw downwards
  z-index: 1 // place above, and hide, tab nav button upper borders
  position: relative // or z-index ignored
  background: white !important // or won't hide tab nav button upper borders

// ... Make the selected tab nav button's upper border hide the tab panels
// lower border, so there's effectively no border (since background is white)
// between the active tab and the tab panel */
// /* Skip this, the white border overlaps the scrollbar.
// And on focus, the tab <li> is outlined (which is fairly nice actualy),
// so there's a border regardless. */
//  .dw-ui-tabs-bottom > .ui-tabs-nav > li.ui-tabs-selected {
//    border-top: 2px white; // same as background color
//    z-index: 2; // place above panel (hides the panel border)
// }

.dw-pri .dw-ui-tabs-bottom .ui-tabs-nav li
  border-bottom: 1px solid !important // cancel hiding of bottom border

// ... Don't let other CSS override font size etcetera, that'd affect the
// tap height — they might overlap with the tab panel, or there might be a glap.
// Alternatively, COULD config jQuery UI with #dw-pri (instead of .dw-pri),
// then other CSS wouldn't override jQuery UI so easily.
.dw-pri.dw-pri .ui-tabs-nav li a
  font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif
  font-size: 13px
  line-height: 17px

// ... Remove "outline border" between active tab and panel
// — no keep it, it's nice to have
//.dw-pri.dw-pri .ui-tabs-nav li.ui-tabs-selected a {
//  outline: none; // or .ui-state-focus on parent <li> —> outline

// Undo settings to .dw-pri .ui-widget, when they affect contents
// inside widgets, rather than buttons and tabs.
.dw-pri .ui-widget.ui-widget-content
  font-family: Verdana, sans-serif // same as for .dw-debate
  font-size: 100% // jQuery UI sets .dw-pri .ui-widget to 1.1em

// Undo settings to .dw-pri .ui-widget textarea
.dw-pri .ui-widget textarea
  font-family: Verdana, sans-serif
  font-size: 100% // else jQuery UI sets 1em

// Undo link colors
.dw-pri .ui-widget-content a
  color: #00c  // same as a:link

// Makes a jQuery-UI-button():ized <a> tag look more like a link
.dw-ui-state-default-linkified
  border: none !important
  background: none !important

// Make accordions smaller; jQuery UI padds a little bit too much?
.dw-pri .ui-accordion .ui-accordion-header a
  padding: 0.2em 0.2em 0.2em 0.7em

// jQuery UI bug fix: in the jQuery-auto-generated file, ".debiki"
// is missing (on the next line).
.dw-pri input.ui-button
  padding: .4em 1em



// AngularJS
//===========================

// See: http://docs.angularjs.org/api/ng.directive:ngCloak
[ng\:cloak], [ng-cloak], .ng-cloak
  display: none !important



// Twitter Bootstrap
//===========================

// Cancel .icon 14px width — I'm using Fontello's icons, instead of Twitter's.
// There are some other icon styles that Bootstrap applies and that could be
// cancelled here — what should be done, in fact, is to build Bootstrap
// and comment out:  @import "./bootstrap/less/sprites.less
// see http://drupal.org/node/1949992
.DW [class^="icon-"],
.DW [class*=" icon-"]
  width: auto

// From http://twitter.github.com/bootstrap/assets/css/bootstrap.css,
// 2012-03-21, v.2.0.2.
.tooltip
  position: absolute
  z-index: 1020
  display: block
  visibility: visible
  padding: 5px
  font-size: 11px
  opacity: 0
  // This line results in: "TypeError: expected rgba or hsla, but got unit:0".
  // It was generated by `stylus --css ...`, i.e. when I converted from CSS to Stylues.
  //filter: alpha(opacity=0)

.tooltip.in
  opacity: 0.8
  //filter: alpha(opacity=80) // --> TypeError: expected rgba or hsla, but got unit:0

.tooltip.top
  margin-top: -2px

.tooltip.right
  margin-left: 2px

.tooltip.bottom
  margin-top: 2px

.tooltip.left
  margin-left: -2px

.tooltip.top .tooltip-arrow
  bottom: 0
  left: 50%
  margin-left: -5px
  border-left: 5px solid transparent
  border-right: 5px solid transparent
  border-top: 5px solid #000000

.tooltip.left .tooltip-arrow
  top: 50%
  right: 0
  margin-top: -5px
  border-top: 5px solid transparent
  border-bottom: 5px solid transparent
  border-left: 5px solid #000000

.tooltip.bottom .tooltip-arrow
  top: 0
  left: 50%
  margin-left: -5px
  border-left: 5px solid transparent
  border-right: 5px solid transparent
  border-bottom: 5px solid #000000

.tooltip.right .tooltip-arrow
  top: 50%
  left: 0
  margin-top: -5px
  border-top: 5px solid transparent
  border-bottom: 5px solid transparent
  border-right: 5px solid #000000

.tooltip-inner
  max-width: 200px
  padding: 3px 8px
  color: #ffffff
  text-align: center
  text-decoration: none
  background-color: #000000
  -webkit-border-radius: 4px
  -moz-border-radius: 4px
  border-radius: 4px

.tooltip-arrow
  position: absolute
  width: 0
  height: 0

// [kajmagnus@debiki] Workarounds.
.tooltip
  // Otherwise Chrome makes it very thin, when outside browser window,
  // so the tip arrow gets offset incorrectly:
  width: 500px



// SVG
//===========================


#dw-t-root
  overflow: hidden // hides the excessively wide <svg> elems, see above

.dw-flip-hz
  -moz-transform: scaleX(-1)
  -o-transform: scaleX(-1)
  -webkit-transform: scaleX(-1)
  transform: scaleX(-1)
  filter: FlipH
  -ms-filter: "FlipH"



// Public API
//===========================

.debiki-0-reply-button-text
  display: none

img.debiki-0-inline
  display: inline
  margin: 0
  width: auto



// Things to move to app/views/themesbuiltin/default20121009/-somewhere-
//===========================


#forum-search
  float: right
  z-index: 1
  position: relative

#forum-search input[type='text']
  width: 180px

#forum-search input[type='text']:focus
  width: 320px

//.search-result-page-title

.search-result-post-text a
  color: black !important



// vim: fdm=marker et ts=2 sw=2 tw=100 fo=tcqwn list
